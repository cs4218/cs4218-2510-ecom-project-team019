# Currently does not work, can try to make this work in the future if you are feeling motivated. I suspect the issue is cos the env secrets are not yet set in Github

# name: E2E Tests using Playwright
# on:
#     push:
#         branches: [main, master]
#     pull_request:
#         branches: [main, master]

# jobs:
#     test:
#         timeout-minutes: 60
#         runs-on: ubuntu-latest

#         steps:
#             - uses: actions/checkout@v4

#             - uses: actions/setup-node@v4
#               with:
#                   node-version: lts/*

#             - name: Install dependencies
#               run: npm ci

#             - name: Install Playwright Browsers
#               run: npx playwright install --with-deps

#             - name: Start app
#               run: nohup npm run playwright-ci > server.log 2>&1 &
#               env:
#                   CI: true

#             - name: Wait for app to start
#               run: npx wait-on --timeout 60000 http://localhost:3000

#             - name: Print server logs if startup fails
#               if: failure()
#               run: cat server.log

#             # Run Playwright tests after server is ready
#             - name: Run Playwright tests
#               run: npx playwright test

#             - uses: actions/upload-artifact@v4
#               if: ${{ !cancelled() }}
#               with:
#                   name: playwright-report
#                   path: playwright-report/
#                   retention-days: 30
